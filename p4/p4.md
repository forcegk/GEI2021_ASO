# Práctica 4 - ASO

## Solaris 10
### Añadir usuarios
```bash
#!/bin/bash

set -e

# Añadir usuarios
for i in {1..10}; do
    echo Adding user$(printf "%03d" $i)
    useradd -m -d /export/home/user$(printf "%03d" $i) user$(printf "%03d" $i)
done

# Añadir grupos
for gname in verde amarillo rojo; do
    echo Adding group $gname
    groupadd $gname
done

# Añadir usuarios a grupos
for uname in user001 user002 user003 pc; do
    echo Adding $uname to verde
    usermod -G verde $uname
done
for uname in user007 user008 user009; do
    echo Adding $uname to rojo
    usermod -G rojo $uname
done
for uname in user010; do
    echo Adding $uname to amarillo
    usermod -G amarillo $uname
done

# Set expiration date
for uname in user005 user006; do
    echo Setting expiry date of $uname to 10-Apr-2021
    usermod -e 4/10/2021 $uname
    echo "Setting password expiry time to 30 days"
    passwd -x 30 $uname
done

echo "Cambiar contraseñas a mano de users1-10"
for i in {1..10}; do
    echo "Changing password for user$(printf "%03d" $i)"
    passwd user$(printf "%03d" $i)
done
```

## OpenBSD 6.8
### Añadir usuarios

```bash
#!/bin/ksh

# Para establecer la contraseña mientras se crea el usuario:
# encpass=$(encrypt -b8 contraseña)
# useradd -m $username -p $encpass

# Añadir usuarios
i=1
while [ $i -le 10 ]
do
  username=$(printf "user%03d" $i)
  echo "Adding user $username"
  useradd -m $username
  i=$((i+1))
done

# Añadir grupos
echo "Creating groups verde, amarillo, rojo"
groupadd verde
groupadd amarillo
groupadd rojo

# Añadir usuarios a verde
i=1
while [ $i -le 3 ]
do
  username=$(printf "user%03d" $i)
  echo "Adding $username to group verde"
  usermod -G verde $username
  i=$((i+1))
done

# Añadir usuarios a rojo
i=7
while [ $i -le 9 ]
do
  username=$(printf "user%03d" $i)
  echo "Adding $username to group rojo"
  usermod -G rojo $username
  i=$((i+1))
done

# Añadir usuarios a amarillo
echo "Adding user010 to group verde"
usermod -G rojo user010

# Establecer fecha de caducidad a 10 de abril de 2021
# y periodo de envejecimiento 30 días
echo "Setting password expiry time to 30 days for user005, user006"
usermod -e "apr 10 2021" -f 30d user005
usermod -e "apr 10 2021" -f 30d user006

# Cambiar contraseñas a mano de todos los usuarios
echo "Manually set passwords for new users:"
i=1
while [ $i -le 10 ]
do
  username=$(printf "user%03d" $i)
  passwd $username
  i=$((i+1))
done
```

#### Notas:

Para cambiar la distribución de teclado en openbsd: `kbd us`

Para hacer el cambio persistente: `wsconsctl keyboard.encoding=us`