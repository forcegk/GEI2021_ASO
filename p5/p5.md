# Practica 5 - ASO

Añadimos las interfaces de red nuevas en las VMs:
- **ASO 1**:
    1. NAT: *Intel PRO/1000MT Desktop*
    2. Red interna: *PCnet-FAST III*
    3. Red interna: *PCnet-FAST III*

- **ASO 2**:
    1. NAT: *Intel PRO/1000MT Desktop*
    2. Red interna: *Intel PRO/1000MT Desktop*
    3. Red interna: *Intel PRO/1000MT Desktop*

- **ASO 3**:
    1. NAT: *Intel PRO/1000MT Desktop*
    2. Red interna: *Intel PRO/1000MT Desktop*
    3. Red interna: *Intel PRO/1000MT Desktop*

## Solaris 10
```bash
#!/bin/bash

set -e

INTERFACES="e1000g0 pcn0 pcn0:1 pcn0:2 pcn0:3 pcn1 pcn1:1 pcn1:2 pcn1:3"
HOSTNAME=$(hostname)

# interface list $1, command $s2
loop_ifaces() {
    echo $1
    for iface in $1; do
        echo Plumbing $iface
        ifconfig $iface $2
    done
}

configure_ifaces() {
    echo Configuring e1000g0 dhcp
    ifconfig e1000g0 dhcp

    echo Configuring pcn0:0..3
    ifconfig pcn0 inet 192.168.2.11/24
    ifconfig pcn0:1 inet 192.168.20.11/24
    ifconfig pcn0:2 inet 192.168.21.11/24
    ifconfig pcn0:3 inet 192.168.22.11/24

    echo Configuring pcn1:0..3
    ifconfig pcn1 inet 192.168.3.11/24
    ifconfig pcn1:1 inet 192.168.30.11/24
    ifconfig pcn1:2 inet 192.168.31.11/24
    ifconfig pcn1:3 inet 192.168.32.11/24
}

configure_ifaces_persistent() {
    echo Configuring e1000g0 dhcp
    touch /etc/$HOSTNAME.e1000g0
    touch /etc/dhcp.e1000g0

    echo Configuring pcn0:0..3
    echo "inet 192.168.2.11/24" > /etc/$HOSTNAME.pcn0
    echo "inet 192.168.20.11/24" >  /etc/$HOSTNAME.pcn0:1
    echo "inet 192.168.21.11/24" >  /etc/$HOSTNAME.pcn0:2
    echo "inet 192.168.22.11/24" >  /etc/$HOSTNAME.pcn0:3

    echo Configuring pcn1:0..3
    ifconfig pcn1 inet 192.168.3.11/24
    ifconfig pcn1:1 inet 192.168.30.11/24
    ifconfig pcn1:2 inet 192.168.31.11/24
    ifconfig pcn1:3 inet 192.168.32.11/24
}

# Configurar
loop_ifaces "$INTERFACES" plumb
configure_ifaces
configure_ifaces_persistent
loop_ifaces "$INTERFACES" up

# Desconfigurar
#loop_ifaces "$INTERFACES" down
#loop_ifaces "$INTERFACES" unplumb

```
Buscar interfaces: `dmesg | egrep 'e1000g|pcn'`

Comprobar configuración: `ifconfig -a`